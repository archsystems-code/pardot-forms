<div style="background-image: url(' http://www2.archsystems.com/l/67312/2018-01-19/bbg6k5/67312/171420/bg_min.jpg'); background-size: 100% auto;width: 100%; min-height: 600px;background-repeat: no-repeat; background-position: center center;"></div>
<img alt="" border="0" src="http://www2.archsystems.com/l/67312/2018-01-19/bbg3nt/67312/171412/footer.jpg" style="width: 100%; height: auto; border-width: 0px; border-style: solid;"
/>
<!-- Below Form -->
<script src="https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js"></script>
<script src="http://www2.archsystems.com/l/67312/2018-01-18/bbf6h3/67312/171294/dropzone.js"></script>
<script src="http://www2.archsystems.com/l/67312/2018-01-19/bbffwf/67312/171344/progressbar.min.js"></script>
<script>
  var maxBlob = 8 * 1000 * 1000;
  function uploadFiles(e) {
    e.preventDefault();
    var myDropzone = Dropzone.forElement("#file-upload");
    if (myDropzone.files.length === 0) {
      return false;
    }
    var ACCESS_TOKEN = "E2kOOrj3PAoAAAAAAAAV3iglJznk6_o8_PNYC16bHyIWLXCrPQxQXZLB-Nt7SfcJ";
    var dbx = new Dropbox({ accessToken: ACCESS_TOKEN });
    var bar = new ProgressBar.Line("#container", {
      strokeWidth: 4,
      easing: 'easeInOut',
      color: "#BF3060",
      trailColor: "#eee",
      trailWidth: 1,
      svgStyle: { width: "100%", height: "100%" },
      text: {
        style: {
          color: '#999',
          position: 'absolute',
          right: '0',
          top: '30px',
          padding: 0,
          margin: 0,
          transform: null
        }
      },
      step: (state, bar) => {
        bar.setText(Math.round(bar.value() * 100) + "%")
      }
    })
    var progressContainer = document.getElementById("container");
    var submit = document.getElementsByClassName("submit")[0];
    var loading = document.createElement("P");
    var loadingText = document.createTextNode("Please wait while we upload your submission");
    loading.setAttribute("style", "text-align: center; margin-bottom: 20px;")
    loading.appendChild(loadingText);
    submit.style.display = "none";
    var formElementsContainer = document.getElementById("form-elements");
    var firstName = document.getElementById("67312_132962pi_67312_132962").value;
    var lastName = document.getElementById("67312_132964pi_67312_132964").value;
    formElementsContainer.innerHTML = "";
    formElementsContainer.appendChild(progressContainer);
    formElementsContainer.appendChild(loading)
    console.log("Upload files: %0", myDropzone.files);
    var workItems = [];
    var workItemsSize = 0;
    myDropzone.files.forEach(function (file) {
      if (file.size < maxBlob) {
        workItems.push({ file: file, chunk: false, size: file.size });
        workItemsSize += file.size;
      } else {
        var offset = 0;
        while (offset < file.size) {
          var chunkSize = Math.min(maxBlob, file.size - offset);
          workItems.push({ file: file, chunk: true, offset: offset, end: offset + chunkSize, size: chunkSize });
          workItemsSize += chunkSize;
          offset += chunkSize;
        }
        workItems[workItems.length - 1].close = true;
      }
    });
    console.log("Workitems:", workItems);
    if (workItems.length === 1) {
      var file = workItems[0].file;
      console.log("Uploading file: " + file.name);
      bar.animate(1.0);
      dbx.filesUpload({ path: '/' + firstName + ' ' + lastName + '/' + file.name, contents: file })
        .then(function (response) {
          console.log(response);
          console.log("Completed uploading of file: " + file.name);
          loading.remove();
          progressContainer.style.display = "none";
          var message = document.createElement("P");
          var messageText = document.createTextNode("We received your submission, thank you and good luck!");
          message.setAttribute("style", "text-align: center; margin-bottom: 20px;")
          message.appendChild(messageText);
          formElementsContainer.innerHTML = "";
          formElementsContainer.appendChild(message);
        })
        .catch(function (error) {
          console.error(error);
        });
    } else {
      var msg = (myDropzone.files.length === 1) ? "Uploading file: " + myDropzone.files[0].name : "Uploading files";
      var sessionId;
      var bytesUploaded = 0;
      var result = Promise.resolve();
      workItems.forEach(function (workItem) {
        var file = workItem.file;
        result = result.then(function () {
          if (!workItem.chunk) {
            console.log("Uploading file:", file.name);
            return dbx.filesUpload({ path: '/' + firstName + ' ' + lastName + '/' + file.name, contents: file })
              .then(function (response) {
                console.log(response);
                console.log("Completed uploading of file: " + file.name);
                bytesUploaded += workItem.size;
                console.log("progress", bytesUploaded / workItemsSize);
                bar.animate(bytesUploaded / workItemsSize, { duration: 1500 });
              })
              .catch(function (error) {
                console.error(error);
              });
          } else if (workItem.offset === 0) {
            console.log("Starting multipart upload of file:", file.name);
            var blob = file.slice(workItem.offset, workItem.end);
            return dbx.filesUploadSessionStart({ close: false, contents: blob })
              .then(function (response) {
                sessionId = response.session_id;
                console.log("Complete multipart upload start, sessionId:", sessionId);
                bytesUploaded += workItem.size;
                console.log("progress", bytesUploaded / workItemsSize);
                bar.animate(bytesUploaded / workItemsSize, { duration: 1500 });
              })
          } else if (!workItem.close) {
            console.log("Putting chunk in multipart upload of file:", file.name);
            var cursor = { session_id: sessionId, offset: workItem.offset };
            var blob = file.slice(workItem.offset, workItem.end);
            return dbx.filesUploadSessionAppendV2({ cursor: cursor, close: false, contents: blob })
              .then(function (response) {
                console.log("Complete multipart upload append");
                bytesUploaded += workItem.size;
                console.log("progress", bytesUploaded / workItemsSize);
                bar.animate(bytesUploaded / workItemsSize, { duration: 1500 });
              })
          } else {
            console.log("Completing multipart upload of file:", file.name);
            var cursor = { session_id: sessionId, offset: workItem.offset };
            var commit = { path: '/' + firstName + ' ' + lastName + '/' + file.name, mode: 'add', autorename: true, mute: false };
            var blob = file.slice(workItem.offset, workItem.end);
            return dbx.filesUploadSessionFinish({ cursor: cursor, commit: commit, contents: blob })
              .then(function (response) {
                console.log("Complete multipart upload finish");
                sessionId = null;
                bytesUploaded += workItem.size;
                console.log("progress", bytesUploaded / workItemsSize);
                bar.animate(bytesUploaded / workItemsSize, { duration: 1500 });
              })
          }
        })
      })
      result.then(function () {
        loading.remove();
        formElementsContainer.style.display = "none";
        var message = document.createElement("P");
        var messageText = document.createTextNode("We received your submission, thank you and good luck!");
        message.setAttribute("style", "text-align: center; margin-bottom: 20px;")
        message.appendChild(messageText);
        formElementsContainer.innerHTML = "";
        formElementsContainer.appendChild(message);
        if (myDropzone.files.length === 1) {
          console.log("Completed uploading of file: " + myDropzone.files[0].name)
        } else {
          console.log("Completed uploading of multiple files")
        }
      })
        .catch(function (reason) {
          console.log("ERR:", reason)
        })
    }
    return false;
  };
  var head = document.head;
  var dropzoneLink = document.createElement("link");
  dropzoneLink.type = "text/css";
  dropzoneLink.rel = "stylesheet";
  dropzoneLink.href = "http://www2.archsystems.com/l/67312/2018-01-18/bbf6xw/67312/171300/dropzone.css";
  var customLink = document.createElement("link");
  customLink.type = "text/css";
  customLink.rel = "stylesheet";
  customLink.href = "http://www2.archsystems.com/l/67312/2018-01-19/bbg7mw/67312/171454/main.css"
  head.appendChild(dropzoneLink);
  head.appendChild(customLink);
  var form = document.getElementsByTagName("form");
  form[0].addEventListener("submit", uploadFiles, false);
  var newDropZoneItem = document.createElement("Div");
  newDropZoneItem.setAttribute("id", "file-upload");
  newDropZoneItem.setAttribute("class", "dropzone");
  var newProgressBarContainer = document.createElement("Div");
  newProgressBarContainer.setAttribute("id", "container")
  Dropzone.options.fileUpload = {
    url: "http://www2.archsystems.com/l/67312/2018-01-18/bbd5my",
    dictDefaultMessage: "Drop Photos or Videos Here"
  }
  document.getElementsByClassName("submit")[0].insertAdjacentElement('beforebegin', newDropZoneItem);
  document.body.appendChild(newProgressBarContainer);
  Array.from(document.getElementsByClassName("form-field")).forEach(function (el) {
    var container = document.getElementById("form-elements");
    container.appendChild(el);
    container.appendChild(newDropZoneItem);
  })
</script>